<app-navbarlearner></app-navbarlearner>

<div class="wrapper">
    <div class="section section-about-us">
        <div class="container">
            <div class="card" >
                <div class="container-fliud">
                    <div class="wrapper row">
                        <div class="preview col-md-6">

                            <div class="preview-pic tab-content">
                                <div class="tab-pane active" id="pic-1">
                                    <img src="{{course?.image}}"/>
                                </div>
                                <div class="tab-pane" id="pic-2"><img src="http://placekitten.com/400/252"/></div>
                                <div class="tab-pane" id="pic-3"><img src="http://placekitten.com/400/252"/></div>
                                <div class="tab-pane" id="pic-4"><img src="http://placekitten.com/400/252"/></div>
                                <div class="tab-pane" id="pic-5"><img src="http://placekitten.com/400/252"/></div>
                            </div>


                        </div>
                        <div class="details col-md-6">
                            <h3 class="product-title">{{course?.title}}</h3>
                            <img *ngIf="userDetails" src="{{userDetails.profilepic}}" style="height:80px;width:80px" alt="Thumbnail Image" class="rounded-circle img-raised"><h5>Author: {{userDetails.username}} </h5>
                            <div class="rating">
                                <div class="stars">
                                    <span *ngFor="let item of [].constructor(activeStars)"
                                          class="fa fa-star checked"></span>
                                    <span *ngFor="let item of [].constructor(inactiveStars)"
                                          class="fa fa-star-o"></span>
                                </div>
                                <span class="review-no">{{this.course?.ratings.length}} reviews</span>
                            </div>
                            <p class="product-description">{{course?.description}}</p>
                            
        
                                   
                                    <div class="nav-tabs-navigation" data-tabs-color="orange">
                                            <div class="nav-tabs-wrapper">
                                                <ngb-tabset [justify]="'center'" class="text-center" [destroyOnHide]="false" >
                                                    <ngb-tab title="Basic">
                                                      <ng-template ngbTabContent>
                                                         <div class="text-muted">Description :</div>
                                                        <h6 style="font-weight:bold;">{{this.course?.basicdesc}}</h6>
                                                        <div class="text-muted">Price :</div>
                                                        <h6 style="font-weight:bold;">{{this.course?.basicprice}}</h6>
                                                        <div class="text-muted">Number of hours : {{this.course?.basichours}}</div><br>
                                                       
                                                      </ng-template>
                                                    </ngb-tab>
                                                    <ngb-tab title="Standard">
                                                      <ng-template ngbTabContent>
                                                            <div class="text-muted">Description :</div>
                                                            <h6 style="font-weight:bold;">{{this.course?.standarddesc}}</h6>
                                                            <div class="text-muted">Price :</div>
                                                            <h6 style="font-weight:bold;">{{this.course?.standardprice}}</h6>
                                                            <div class="text-muted">Number of hours : {{this.course?.standardhours}}</div><br>
                                                           
                                                      </ng-template>
                                                    </ngb-tab>
                                                    <ngb-tab title="Premium">
                                                      <ng-template ngbTabContent>
                                                            <div class="text-muted">Description :</div>
                                                            <h6 style="font-weight:bold;">{{this.course?.premiumdesc}}</h6>
                                                            <div class="text-muted">Price :</div>
                                                            <h6 style="font-weight:bold;">{{this.course?.premiumprice}}</h6>
                                                            <div class="text-muted">Number of hours : {{this.course?.premiumhours}}</div><br>
                                                           
                                                      </ng-template>
                                                    </ngb-tab>
                                                </ngb-tabset>
                                            </div>
                                        </div>

                            <div class="action">
                                <button class="add-to-cart btn btn-default"
                                        type="button"
                                        (click)="open(couponCheckout, '', '')"
                                        *ngIf=" course && isCouponBought()"
                                >add to cart</button>
                                <button class="add-to-cart btn btn-default"
                                        type="button"
                                        (click)="open(awaitCoursePurchase, 'purchase', '')"
                                        *ngIf=" course && !isCouponBought()"
                                >Buy course</button>
                                <button class="like btn btn-default" type="button"
                                        (click)="open(classic,'' , '')">
                                    <span class="fa fa-heart"></span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <ng-template #classic let-c="close" let-d="dismiss">
            <div class="modal-dialog modal-dialog-centered" role="document">
                <div class="modal-content">
                    <div class="text-right cross"><i class="fa fa-times mr-2"></i></div>
                    <div class="card-body text-center"><img src=" https://i.imgur.com/d2dKtI7.png" height="100"
                                                            width="100">
                        <div class="comment-box text-center">
                            <h4>Add a comment</h4>
                            <div class="rating">
                                <input type="radio" name="rating" [value]="5" id="5" [(ngModel)]="ratedStarsCount">
                                <label for="5">☆</label>
                                <input type="radio" name="rating" [value]="4" id="4" [(ngModel)]="ratedStarsCount">
                                <label for="4">☆</label>
                                <input type="radio" name="rating" [value]="3" id="3" [(ngModel)]="ratedStarsCount">
                                <label for="3">☆</label>
                                <input type="radio" name="rating" [value]="2" id="2" [(ngModel)]="ratedStarsCount">
                                <label for="2">☆</label>
                                <input type="radio" name="rating" [value]="1" id="1" [(ngModel)]="ratedStarsCount">
                                <label for="1">☆</label>
                            </div>
                            <div class="comment-area">
                                    <textarea
                                            class="form-control"
                                            placeholder="what is your view?"
                                            rows="4"
                                            [(ngModel)]="comment"
                                    >

                                    </textarea>
                            </div>
                            <div class="text-center mt-4">
                                <button class="btn btn-success send px-5" (click)="handleOnRatingPopupSubmitted()">
                                    Send message <i class="fa fa-long-arrow-right ml-1"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </ng-template>


        <div class="card card-nav-tabs card-plain"
             style="height: 20%;width: 20%;margin-left:1500px ;margin-top: -200px;">
            <div class="card-header card-header-danger">
                <!-- colors: "header-primary", "header-info", "header-success", "header-warning", "header-danger" -->
                <div class="nav-tabs-navigation">
                    <div class="nav-tabs-wrapper">
                        <ul class="nav nav-tabs" data-tabs="tabs">
                            <li class="nav-item">
                                <a class="nav-link active" href="#home" data-toggle="tab">Home</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="#updates" data-toggle="tab">Updates</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="#history" data-toggle="tab">History</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="container">
        <h2 class="text-left">Comments ({{course?.comments.length}}) :</h2>
        <div class="card">
            <div class="card-body" *ngFor="let comment of course?.comments">
                <app-comment [comment]="{comment: comment, rating: getRatingByComment(course, comment.timeStamp)  }"></app-comment>
            </div>
        </div>
    </div>

    <ng-template #couponCheckout let-c="close" let-d="dismiss">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="card-body text-center">
                    <img src="https://cdn0.iconfinder.com/data/icons/flat-design-business-set-2/24/coupon-green-512.png"
                         height="100"
                         width="100">
                    <div class="comment-box text-center">
                        <h4>Enter the coupon code</h4>
                        <div class="comment-area">
                            <input type="text"
                                   class="form-control"
                                   placeholder="w8987..."
                                   [(ngModel)]="inputCouponCode"
                                   (change)="onCouponCodeChanged()"
                            />
                        </div>
                        <br>
                        <br>
                         <a [routerLink]="['/checkout', course?._id]"><h6 style="color:green; text-align:center">Skip</h6> </a>
                        <div class="text-center mt-4">
                            <button class="btn btn-success send px-5"
                                    *ngIf="onCouponCodeChanged()"
                            (click)="onCouponCodeSubmitted()">
                                Get course event <i class="fa fa-long-arrow-right ml-1"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </ng-template>

    <ng-template #awaitCoursePurchase let-c="close" let-d="dismiss">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="card-body text-center">
                    <img src="https://cdn0.iconfinder.com/data/icons/flat-design-business-set-2/24/coupon-green-512.png"
                         height="100"
                         width="100">
                    <div class="comment-box text-center">
                        <h4>Please check your email to confirm order & retrieve coupons code</h4>
                        </div>
                    </div>
                </div>
            </div>
    </ng-template>
    <footer class="footer footer-default">
        <div class="container">
            <nav>
                <ul>
                    <li>
                        <a href="https://www.creative-tim.com">
                            Creative Tim
                        </a>
                    </li>
                    <li>
                        <a href="https://www.creative-tim.com/about-us">
                            About Us
                        </a>
                    </li>
                    <li>
                        <a href="http://blog.creative-tim.com">
                            Blog
                        </a>
                    </li>
                    <li>
                        <a href="https://github.com/creativetimofficial/now-ui-kit/blob/master/LICENSE.md">
                            MIT License
                        </a>
                    </li>
                </ul>
            </nav>
            <div class="copyright">
                &copy;
                {{data | date: 'yyyy'}}, Designed by
                <a href="https://www.invisionapp.com" target="_blank">Invision</a>. Coded by
                <a href="https://www.creative-tim.com" target="_blank">Creative Tim</a>.
            </div>
        </div>
    </footer>
</div>
